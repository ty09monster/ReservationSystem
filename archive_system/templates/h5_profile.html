<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>修改资料</title>
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/h5.css') }}" rel="stylesheet">
</head>

<body>
    <!-- 加载动画 -->
    <div class="loading" id="loading"></div>

    <!-- 顶部导航栏 -->
    <nav class="top-nav">
        <div class="back-btn" onclick="window.history.back()">
            <i class="icon icon-back"></i>
        </div>
        <h1>修改个人信息</h1>
        <div class="nav-right"></div>
    </nav>

    <!-- 主内容区域 -->
    <div class="main-content">
        <div class="container mt-4">
            <div class="card">
                <div class="card-body">
                    <!-- 显示错误信息 -->
                    {% with messages = get_flashed_messages() %}
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{{ 'danger' if '错误' in message else 'success' }} alert-dismissible fade show" role="alert">
                                    {{ message }}
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                    
                    <form method="POST">
                        <div class="mb-3">
                            <label>证件信息 (不可修改)</label>
                            <div class="input-group">
                                <span class="input-group-text bg-light">{{ user.id_type }}</span>
                                <input type="text" class="form-control" value="{{ user.id_card }}" disabled>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label>姓名</label>
                            <input type="text" name="name" class="form-control" value="{{ user.name }}" required>
                        </div>
                        <div class="mb-3">
                            <label>手机号</label>
                            <input type="tel" name="phone" class="form-control" value="{{ user.phone }}" required>
                            <div class="form-text">请输入正确的手机号码</div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">保存修改</button>
                        <a href="{{ url_for('h5.home') }}" class="btn btn-link w-100 mt-2 text-decoration-none">返回</a>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- 底部导航 -->
    <nav class="bottom-nav">
        <a href="{{ url_for('h5.index') }}" class="bottom-nav-item">
            <i class="icon icon-home"></i>
            <span>首页</span>
        </a>
        <a href="{{ url_for('h5.reserve') }}" class="bottom-nav-item">
            <i class="icon icon-calendar"></i>
            <span>预约</span>
        </a>
        <a href="{{ url_for('h5.history') }}" class="bottom-nav-item">
            <i class="icon icon-history"></i>
            <span>历史</span>
        </a>
        <a href="{{ url_for('h5.profile') }}" class="bottom-nav-item active">
            <i class="icon icon-user"></i>
            <span>我的</span>
        </a>
    </nav>

    <!-- 页脚 -->
    <footer class="footer">
        <p>&copy; <span id="currentYear"></span> 河南农业大学校史馆预约系统 版权所有</p>
    </footer>
    
    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
    
    <script>
        // 页面加载完成后隐藏加载动画
        window.onload = function() {
            setTimeout(function() {
                document.getElementById('loading').style.display = 'none';
            }, 1000);
            
            // 设置当前年份
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        };
    </script>
</body>

</html>